<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Max Stream Style</title>
    <style>
        /* --- ESTILOS GENERALES (DARK PREMIUM) --- */
        :root { --bg: #000000; --text: #ffffff; --text-gray: #a8a8a8; --accent: #ffffff; }
        
        body { 
            margin: 0; padding: 0; 
            background-color: var(--bg); color: var(--text); 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        .view { display: none; }
        .view.active { display: block; animation: fadeIn 0.4s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* --- HOME --- */
        header { padding: 15px; background: linear-gradient(to bottom, rgba(0,0,0,0.8), transparent); position: fixed; width: 100%; z-index: 50; top:0; pointer-events: none;}
        .logo { color: white; font-weight: 900; font-size: 24px; letter-spacing: -1px; text-shadow: 0 2px 10px black; }

        .anime-grid {
            padding: 80px 20px 20px; /* Espacio para el header fijo */
            display: grid; grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
            gap: 12px;
        }
        .poster {
            width: 100%; aspect-ratio: 2/3; border-radius: 6px; overflow: hidden; background: #1a1a1a;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }
        .poster img { width: 100%; height: 100%; object-fit: cover; }
        .anime-title { margin-top: 8px; font-size: 13px; font-weight: 500; color: #ddd; }

        /* --- VISTA DETALLE (ESTILO HBO/MAX) --- */
        
        /* 1. HERO SECTION (IMAGEN DE FONDO + VIDEO) */
        .hero-container {
            position: relative;
            width: 100%;
            aspect-ratio: 16/9; /* Formato Cine */
            background: #111;
        }
        .hero-bg {
            width: 100%; height: 100%; object-fit: cover;
        }
        .hero-gradient {
            position: absolute; bottom: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(to bottom, rgba(0,0,0,0) 50%, #000000 100%);
            pointer-events: none;
        }
        
        /* El Video (Iframe) */
        .video-iframe {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: black; border: none; z-index: 20; display: none;
        }

        /* BotÃ³n Volver (Flotante) */
        .back-icon {
            position: absolute; top: 20px; left: 20px; z-index: 30;
            background: rgba(0,0,0,0.4); width: 32px; height: 32px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 18px; cursor: pointer; backdrop-filter: blur(4px);
        }

        /* 2. CONTENIDO INFO */
        .content-body { padding: 0 20px 40px; transform: translateY(-20px); position: relative; z-index: 10; }

        /* TÃ­tulo */
        .show-title { font-size: 28px; font-weight: 900; line-height: 1.1; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 1px; }

        /* Metadata (AÃ±o, Edad, Temporadas) */
        .meta-row { display: flex; gap: 10px; font-size: 13px; color: var(--text-gray); margin-bottom: 20px; align-items: center; }
        .badge { border: 1px solid var(--text-gray); padding: 1px 4px; border-radius: 2px; font-size: 11px; }

        /* BOTÃ“N PLAY GRANDE (BLANCO) */
        .btn-play-big {
            width: 100%; background: white; color: black;
            border: none; padding: 14px; border-radius: 4px;
            font-size: 16px; font-weight: 700; display: flex; align-items: center; justify-content: center;
            gap: 10px; cursor: pointer; margin-bottom: 20px;
        }
        .btn-play-big:active { opacity: 0.9; transform: scale(0.99); }

        /* Iconos de AcciÃ³n (Mi Lista, Clasificar) */
        .actions-row { display: flex; gap: 40px; margin-bottom: 20px; justify-content: flex-start; }
        .action-item { display: flex; flex-direction: column; align-items: center; gap: 5px; color: white; font-size: 10px; cursor: pointer; }
        .icon-plus { font-size: 24px; font-weight: 300; }

        /* Sinopsis */
        .synopsis { font-size: 14px; line-height: 1.5; color: #ccc; margin-bottom: 30px; }

        /* PestaÃ±as */
        .tabs { display: flex; gap: 20px; border-bottom: 1px solid #333; margin-bottom: 20px; }
        .tab { padding-bottom: 10px; font-weight: 700; font-size: 14px; color: var(--text-gray); cursor: pointer; border-bottom: 3px solid transparent; }
        .tab.active { color: white; border-bottom-color: white; }

        /* Selector Temporada */
        .season-select {
            background: #1a1a1a; padding: 10px 15px; border-radius: 4px; 
            margin-bottom: 20px; font-weight: 600; font-size: 14px; 
            display: flex; justify-content: space-between; align-items: center;
        }

        /* 3. LISTA DE EPISODIOS (Estilo Thumbnail) */
        .ep-list { display: flex; flex-direction: column; gap: 15px; }

        .ep-card { display: flex; gap: 15px; cursor: pointer; }
        .ep-card:active { opacity: 0.7; }
        
        .ep-thumb {
            width: 130px; aspect-ratio: 16/9; background: #222; 
            border-radius: 4px; overflow: hidden; position: relative; flex-shrink: 0;
        }
        .ep-thumb img { width: 100%; height: 100%; object-fit: cover; }
        /* TriÃ¡ngulo Play en miniatura */
        .mini-play {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.6); width: 24px; height: 24px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center; font-size: 10px; border: 1px solid white;
        }

        .ep-info { display: flex; flex-direction: column; justify-content: center; gap: 4px; flex-grow: 1; }
        .ep-title { font-weight: 600; font-size: 14px; color: white; }
        .ep-title.active { color: #8a2be2; } /* Color morado si estÃ¡ sonando */
        .ep-meta { font-size: 12px; color: var(--text-gray); }
        .ep-desc { font-size: 12px; color: #888; margin-top: 4px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }

        .ep-actions { display: flex; align-items: center; color: white; font-size: 18px; }

    </style>
</head>
<body>

    <!-- HOME -->
    <div id="home-view" class="view active">
        <header><div class="logo">ANIME MAX</div></header>
        <div class="anime-grid" id="anime-grid"></div>
    </div>

    <!-- DETALLE -->
    <div id="detail-view" class="view">
        
        <!-- 1. ZONA SUPERIOR (Hero/Video) -->
        <div class="hero-container" id="hero-area">
            <div class="back-icon" onclick="goHome()">âœ•</div>
            
            <!-- Imagen de fondo -->
            <img id="hero-img" class="hero-bg" src="" alt="">
            <div class="hero-gradient"></div>

            <!-- Video (Oculto al inicio) -->
            <iframe id="main-iframe" class="video-iframe" src="" allowfullscreen></iframe>
        </div>

        <!-- 2. INFO DEL SHOW -->
        <div class="content-body">
            
            <!-- TÃ­tulo Estilizado -->
            <div id="detail-title" class="show-title"></div>

            <!-- Metadata (Falsa para estÃ©tica) -->
            <div class="meta-row">
                <span class="badge">18+</span>
                <span>1 Temporada</span>
                <span>2024</span>
                <span>HD</span>
            </div>

            <!-- BOTÃ“N PRINCIPAL -->
            <button class="btn-play-big" onclick="playFirstEpisode()">
                <span>â–¶</span> Reproducir T1 E1
            </button>

            <!-- Acciones -->
            <div class="actions-row">
                <div class="action-item"><span class="icon-plus">ï¼‹</span>Mi lista</div>
                <div class="action-item"><span class="icon-plus">ðŸ‘</span>Clasificar</div>
            </div>

            <p id="detail-synopsis" class="synopsis"></p>

            <!-- PestaÃ±as -->
            <div class="tabs">
                <div class="tab active">Episodios</div>
                <div class="tab">MÃ¡s parecidos</div>
            </div>

            <!-- Selector -->
            <div class="season-select">
                Temporada 1 <span>â–¼</span>
            </div>

            <!-- 3. LISTA DE EPISODIOS -->
            <div class="ep-list" id="episodes-container"></div>
        </div>
    </div>

    <script>
        // ==========================================
        //  BASE DE DATOS (Tus enlaces Dropbox)
        // ==========================================
        const library = [
            {
                id: "elf",
                titulo: "Sukebe Elf Tanbouki",
                poster: "https://veohentai.com/wp-content/uploads/2023/07/Sukebe-Elf-Tanbouki-Episode-1.jpg",
                // Usamos una imagen ancha para el banner
                banner: "https://images6.alphacoders.com/112/thumb-1920-1126197.jpg", 
                sinopsis: "Keyaru, un hÃ©roe sanador que es explotado por otros hÃ©roes, obtiene la oportunidad de retroceder en el tiempo.",
                episodios: [
                    { 
                        num: 1, 
                        nombre: "El inicio de la venganza", 
                        duracion: "24m",
                        // Usamos el banner como miniatura si no hay otra
                        thumb: "https://images6.alphacoders.com/112/thumb-1920-1126197.jpg",
                        link: "https://www.dropbox.com/scl/fi/9rhs0u2gtmx4d6elu8r30/Sukebe-Elf-Tanbouki-1_burn-in_3840x2160_x264.mp4?rlkey=spllrbuhfwaq3uda7hmjas8b8&st=f2ou4pom&raw=1" 
                    },
                    { 
                        num: 2, 
                        nombre: "La continuaciÃ³n oscura", 
                        duracion: "23m",
                        thumb: "https://images6.alphacoders.com/112/thumb-1920-1126197.jpg",
                        link: "https://www.dropbox.com/scl/fi/2xy4tfin44zzebhh9xv7e/Sukebe-Elf-Tanbouki-2_burn-in_3840x2160_x264.mp4?rlkey=0boevey1kfow6wrn4b8h60zbp&st=xel0h8hq&raw=1" 
                    }
                ]
            },
            {
                id: "onepunch",
                titulo: "One Punch Man",
                poster: "https://m.media-amazon.com/images/M/MV5BMTQ4MTk1ODk3M15BMl5BanBnXkFtZTgwMDgxNjE2NzE@._V1_.jpg",
                banner: "https://images8.alphacoders.com/640/thumb-1920-640956.jpg",
                sinopsis: "Saitama es un hÃ©roe por diversiÃ³n, pero es tan fuerte que se aburre.",
                episodios: [
                    { 
                        num: 1, 
                        nombre: "Gaki ni Modotte", 
                        duracion: "24m",
                        thumb: "https://images8.alphacoders.com/640/thumb-1920-640956.jpg",
                        link: "https://www.dropbox.com/scl/fi/ha1iafyei1il8chcxo6xm/Gaki-ni-Modotte-Yarinaoshi-01_burn-in_3840x2160_x264.mp4?rlkey=pztorjul7poddxjapxdqpazg7&st=eqkf667d&raw=1" 
                    }
                ]
            }
        ];

        // VARIABLES GLOBALES
        const homeView = document.getElementById('home-view');
        const detailView = document.getElementById('detail-view');
        const grid = document.getElementById('anime-grid');
        const heroImg = document.getElementById('hero-img');
        const mainIframe = document.getElementById('main-iframe');
        
        let currentAnime = null; // Para saber cuÃ¡l estÃ¡ abierto

        function initApp() {
            grid.innerHTML = "";
            library.forEach(anime => {
                const card = document.createElement('div');
                card.onclick = () => openAnimeDetail(anime);
                card.innerHTML = `
                    <div class="poster"><img src="${anime.poster}" alt=""></div>
                    <div class="anime-title">${anime.titulo}</div>
                `;
                grid.appendChild(card);
            });
        }

        function openAnimeDetail(anime) {
            currentAnime = anime; // Guardamos referencia
            
            // 1. Resetear UI
            mainIframe.src = "";
            mainIframe.style.display = "none"; // Ocultar video
            heroImg.style.display = "block";   // Mostrar imagen
            
            // 2. Llenar datos
            heroImg.src = anime.banner;
            document.getElementById('detail-title').innerText = anime.titulo;
            document.getElementById('detail-synopsis').innerText = anime.sinopsis;

            // 3. Generar Lista de Episodios Estilo "Max"
            const epList = document.getElementById('episodes-container');
            epList.innerHTML = "";
            
            anime.episodios.forEach(ep => {
                const card = document.createElement('div');
                card.className = 'ep-card';
                card.onclick = () => playEpisode(ep.link, card); // Clic en toda la tarjeta
                
                card.innerHTML = `
                    <div class="ep-thumb">
                        <img src="${ep.thumb || anime.banner}" alt="">
                        <div class="mini-play">â–¶</div>
                    </div>
                    <div class="ep-info">
                        <div class="ep-title">${ep.num}. ${ep.nombre}</div>
                        <div class="ep-meta">2024 â€¢ ${ep.duracion}</div>
                        <div class="ep-desc">${anime.sinopsis}</div> 
                    </div>
                    <div class="ep-actions">
                        <span style="font-size:14px; color:#aaa">â¬‡</span>
                    </div>
                `;
                epList.appendChild(card);
            });

            switchView(detailView);
            window.scrollTo(0,0);
        }

        // FunciÃ³n del BotÃ³n Grande Blanco
        function playFirstEpisode() {
            if(currentAnime && currentAnime.episodios.length > 0) {
                // Simular clic en el primer episodio de la lista
                const firstLink = currentAnime.episodios[0].link;
                playEpisode(firstLink, null);
            }
        }

        function playEpisode(url, cardElement) {
            // 1. Mostrar Video
            heroImg.style.display = "none";
            mainIframe.style.display = "block";
            mainIframe.src = url;

            // 2. Colorear tÃ­tulo en la lista
            document.querySelectorAll('.ep-title').forEach(el => el.classList.remove('active'));
            if(cardElement) {
                const title = cardElement.querySelector('.ep-title');
                if(title) title.classList.add('active');
            }

            // 3. Scroll suave al video
            document.getElementById('hero-area').scrollIntoView({ behavior: 'smooth' });
        }

        function goHome() {
            mainIframe.src = "";
            switchView(homeView);
        }

        function switchView(targetView) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            targetView.classList.add('active');
        }

        initApp();
    </script>
</body>
</html>
